<!-- Employees Page -->
<div class="employees-page mt-5">
  <h2 class="fw-bold mb-3">Empleados</h2>

  <div class="table-responsive">
    <table class="table table-sm align-middle employees-table w-100">
      <colgroup>
        <col class="col-id" />
        <col class="col-nombre" />
        <col class="col-apellido" />
        <col class="col-email" />
        <col class="col-telefono" />
        <col class="col-rol" />
        <col class="col-activo" />
        <col class="col-salario" />
        <col class="col-cuit" />
        <col class="col-cuil" />
        <col class="col-acciones" />
      </colgroup>
      <thead>
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Nombre</th>
          <th scope="col">Apellido</th>
          <th scope="col">Email</th>
          <th scope="col">Teléfono</th>
          <th scope="col">Rol</th>
          <th scope="col">Activo</th>
          <th scope="col">Salario/Hora</th>
          <th scope="col">CUIT</th>
          <th scope="col">CUIL</th>
          <th scope="col">Acciones</th>
        </tr>
      </thead>
      <tbody>
        @for (e of employees; track e.id) {
          <tr>
            <th scope="row">{{ e.id }}</th>
            <td>{{ e.name }}</td>
            <td>{{ e.lastName }}</td>
            <td>{{ e.email }}</td>
            <td>{{ e.phoneNumber }}</td>
            <td>{{ e.role.name }}</td>
            <td>{{ e.isActive ? 'Sí' : 'No' }}</td>
            <td>{{ e.hourlyWage }}</td>
            <td>{{ e.cuit || '-' }}</td>
            <td>{{ e.cuil || '-' }}</td>
            <td class="text-end">
              <div class="d-inline-flex gap-1">
                <button class="btn btn-sm btn-accent rounded-3" (click)="openEmployeeEditModal(e)">Editar</button>
                <button class="btn btn-sm btn-danger rounded-3">Eliminar</button>
              </div>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>

  <div class="d-flex flex-column flex-md-row align-items-stretch align-items-md-center justify-content-between mt-3 gap-3 actions-pagination-row">
    <div>
      <button class="btn btn-accent btn-sm" (click)="openEmployeeCreateModal()">+ Registrar nuevo empleado</button>
    </div>
    <!--<div class="flex-grow-1 d-flex justify-content-center">
      <app-pagination
        [page]="page"
        [hasNext]="hasNext"
        (previous)="previousPage()"
        (next)="nextPage()">
      </app-pagination>
    </div>-->
    <div class="text-md-end">
      <button class="btn btn-accent btn-sm" (click)="showCreateEmployeeRoleModal = true">+ Registrar nuevo rol</button>
    </div>
  </div>
</div>

<!-- Modal Crear/Editar Empleado -->
@if (showEmployeeModal) {
  <app-employee-form
    [employee]="selectedEmployee"
    (create)="onCreateEmployee($event)"
    (update)="onUpdateEmployee($event)"
    (cancel)="showEmployeeModal = false">
  </app-employee-form>
}

@if (showCreateEmployeeRoleModal) {
  <app-employee-role-form
    (cancel)="showCreateEmployeeRoleModal = false">
  </app-employee-role-form>
}
