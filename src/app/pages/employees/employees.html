<!-- Employees Page -->
<div class="employees-page mt-5">
  <h2 class="fw-bold mb-3">Empleados</h2>

  <div class="table-responsive">
    <table class="table table-sm align-middle employees-table w-100">
      <colgroup>
        <col class="col-id" />
        <col class="col-nombre" />
        <col class="col-apellido" />
        <col class="col-email" />
        <col class="col-telefono" />
        <col class="col-rol" />
        <col class="col-activo" />
        <col class="col-salario" />
        <col class="col-cuit" />
        <col class="col-cuil" />
        <col class="col-acciones" />
      </colgroup>
      <thead>
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Nombre</th>
          <th scope="col">Apellido</th>
          <th scope="col">Email</th>
          <th scope="col">Teléfono</th>
          <th scope="col">Rol</th>
          <th scope="col">Activo</th>
          <th scope="col">Salario/Hora</th>
          <th scope="col">CUIT</th>
          <th scope="col">CUIL</th>
          <th scope="col">Acciones</th>
        </tr>
      </thead>
      <tbody>
        @for (e of employees; track e.id) {
          <tr>
            <th scope="row">{{ e.id }}</th>
            <td>{{ e.name }}</td>
            <td>{{ e.lastName }}</td>
            <td>{{ e.email }}</td>
            <td>{{ e.phoneNumber }}</td>
            <td>{{ e.role.name }}</td>
            <td>{{ e.isActive ? 'Sí' : 'No' }}</td>
            <td>{{ e.hourlyWage }}</td>
            <td>{{ e.cuit || '-' }}</td>
            <td>{{ e.cuil || '-' }}</td>
            <td class="text-end">
              <button class="btn btn-sm btn-outline-secondary me-1" (click)="openEmployeeEditModal(e)">Editar</button>
              <button class="btn btn-sm btn-outline-danger">Eliminar</button>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>

  <div class="d-flex flex-column flex-md-row align-items-stretch align-items-md-center justify-content-between mt-3 gap-3 actions-pagination-row">
    <div>
      <button class="btn btn-accent btn-sm" (click)="openEmployeeCreateModal()">+ Registrar nuevo empleado</button>
    </div>
    <div class="flex-grow-1 d-flex justify-content-center">
      <app-pagination
        [page]="page"
        [hasNext]="hasNext"
        (previous)="previousPage()"
        (next)="nextPage()">
      </app-pagination>
    </div>
    <div class="text-md-end">
      <button class="btn btn-accent btn-sm" (click)="showCreateEmployeeRoleModal = true">+ Registrar nuevo rol</button>
    </div>
  </div>
</div>

<!-- Modal Crear/Editar Empleado -->
@if (showEmployeeModal) {
  <app-employee-form
    [employee]="selectedEmployee"
    (create)="onCreateEmployee($event)"
    (update)="onUpdateEmployee($event)"
    (cancel)="showEmployeeModal = false">
  </app-employee-form>
}

<!-- Modal Crear Rol -->
<div class="modal fade show d-block" tabindex="-1" role="dialog" *ngIf="showCreateEmployeeRoleModal" style="background-color: rgba(0,0,0,.5);">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Crear rol</h5>
        <button type="button" class="btn-close" (click)="showCreateEmployeeRoleModal = false"></button>
      </div>
      <div class="modal-body">
        <!-- Formulario creación rol -->
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" (click)="showCreateEmployeeRoleModal = false">Cancelar</button>
        <button class="btn btn-primary">Guardar</button>
      </div>
    </div>
  </div>
</div>
