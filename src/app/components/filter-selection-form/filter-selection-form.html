<div class="modal-backdrop fade show"></div>
<div class="modal fade show" tabindex="-1" role="dialog" style="display:block; position: fixed; inset: 0; z-index: 1050;">
	<div class="modal-dialog modal-lg modal-dialog-centered" role="document">
		<div class="modal-content filter-selection-modal rounded-5">

			<!-- Header -->
			<div class="modal-header modal-accent rounded-top-5 align-items-center">
				<button type="button" class="btn-close btn-close-white me-auto" (click)="onCancel()" aria-label="Close"></button>
				<h3 class="modal-title text-center fw-bold text-white w-100 m-0">
					{{ headerText }}
				</h3>
				<div class="ms-auto" style="width:24px;"></div>
			</div>

			<!-- Body -->
			<div class="modal-body px-5 pb-4 pt-4">
				<form [formGroup]="form" (ngSubmit)="onSelect()" novalidate>
					<div class="row g-3">
						<div class="col-12">
							<label class="form-label fw-semibold">Opci√≥n</label>
							<!--
								Este <select> guarda el ID (number) de la entidad seleccionada, NO el objeto completo.
								- El valor del option es `o.id`
								- Luego, en `onSelect()`, se busca el objeto con `options.find(o => o.id === selectedId)`
								- Si el usuario elige "Ninguno", el ID es null y se emite `null`
							-->
							<select class="form-select py-2 rounded-3" formControlName="selectedId">
								<option [ngValue]="null">Ninguno</option>
								@for (o of options; track o.id) {
									<option [ngValue]="o.id">{{ getOptionLabel(o) }}</option>
								}
							</select>
						</div>
					</div>

					<div class="d-flex justify-content-center mt-4">
						<button type="submit" class="btn btn-accent px-5 py-2 rounded-pill">
							Seleccionar
						</button>
					</div>
				</form>
			</div>

		</div>
	</div>
</div>
