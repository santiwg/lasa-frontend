<div class="modal-backdrop fade show"></div>
<div class="modal fade show" tabindex="-1" role="dialog" style="display:block; position: fixed; inset: 0; z-index: 1050;">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content employee-modal rounded-5">

      <!-- Header -->
      <div class="modal-header modal-accent rounded-top-5 align-items-center">
        <button type="button" class="btn-close btn-close-white me-auto" (click)="onCancel()" aria-label="Close"></button>
        <h3 class="modal-title text-center fw-bold text-white w-100 m-0">
          {{ isEdit ? 'Editar Empleado' : 'Registrar Empleado' }}
        </h3>
        <!-- Espacio vacío a la derecha para balancear -->
        <div class="ms-auto" style="width:24px;"></div>
      </div>

      <!-- Body -->
      <div class="modal-body px-5 pb-4 pt-4">
        <!-- novalidate is standard in Angular forms to ensure only your framework’s validation runs, not the browser’s. -->
        <form [formGroup]="form" (ngSubmit)="submit()" novalidate>
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label fw-semibold">Nombre</label>
              <input type="text" class="form-control py-2 rounded-3" formControlName="name" placeholder="Ej: Juan" />
              @if (form.get('name')?.invalid && form.get('name')?.touched) {
                <p class="text-danger">El nombre es obligatorio.</p>
              }
            </div>
            <div class="col-md-6">
              <label class="form-label fw-semibold">Apellido</label>
              <input type="text" class="form-control py-2 rounded-3" formControlName="lastName" placeholder="Ej: Pérez" />
              @if (form.get('lastName')?.invalid && form.get('lastName')?.touched) {
                <p class="text-danger">El apellido es obligatorio.</p>
              }
            </div>

            <div class="col-md-6">
              <label class="form-label fw-semibold">Email</label>
              <input type="email" class="form-control py-2 rounded-3" formControlName="email" placeholder="correo@ejemplo.com" />
              @if (form.get('email')?.invalid && form.get('email')?.touched) {
                <p class="text-danger">Debe ingresar un email válido.</p>
              }
            </div>
            <div class="col-md-6">
              <label class="form-label fw-semibold">Teléfono</label>
              <input type="text" class="form-control py-2 rounded-3" formControlName="phoneNumber" placeholder="Ej: 11 5555 5555" />
              @if (form.get('phoneNumber')?.invalid && form.get('phoneNumber')?.touched) {
                <p class="text-danger">
                  El teléfono es obligatorio y debe tener formato válido (solo dígitos, paréntesis y guiones).
                </p>
              }
            </div>

            <div class="col-md-6">
              <label class="form-label fw-semibold">Rol</label>
              <select class="form-select py-2 rounded-3" formControlName="roleId">
                <option [ngValue]="null" disabled>Seleccionar…</option>
                @for (r of roles; track r.id) {
                    <!--the form control associated with the <select> will be set to the corresponding role's id, rather than just a string value.-->
                  <option [ngValue]="r.id">{{ r.name }}</option>
                }
              </select>
              @if (form.get('roleId')?.invalid && form.get('roleId')?.touched) {
                <p class="text-danger">Debe seleccionar un rol.</p>
              }
            </div>
            <div class="col-md-3">
              <label class="form-label fw-semibold">Salario x Hora</label>
              <input type="number" class="form-control py-2 rounded-3" formControlName="hourlyWage" min="0" step="10" />
              @if (form.get('hourlyWage')?.invalid && form.get('hourlyWage')?.touched) {
                <p class="text-danger">El salario debe ser mayor o igual a 0.</p>
              }
            </div>
            <div class="col-md-3">
              <label class="form-label fw-semibold d-block">Está Activo</label>
              <div class="d-flex align-items-center gap-3 ps-1 pt-1">
                <div class="form-check m-0">
                  <input class="form-check-input" type="radio" [checked]="form.value.isActive === true" (change)="form.patchValue({ isActive: true })" name="activeRadio" id="activeYes">
                  <label class="form-check-label" for="activeYes">Sí</label>
                </div>
                <div class="form-check m-0">
                  <input class="form-check-input" type="radio" [checked]="form.value.isActive === false" (change)="form.patchValue({ isActive: false })" name="activeRadio" id="activeNo">
                  <label class="form-check-label" for="activeNo">No</label>
                </div>
              </div>
            </div>

            <div class="col-md-6">
              <label class="form-label fw-semibold">CUIT</label>
              <input type="text" class="form-control py-2 rounded-3" formControlName="cuit" />
              @if (form.get('cuit')?.invalid && form.get('cuit')?.touched) {
                <p class="text-danger">CUIT inválido (solo dígitos y guiones).</p>
              }
            </div>
            <div class="col-md-6">
              <label class="form-label fw-semibold">CUIL</label>
              <input type="text" class="form-control py-2 rounded-3" formControlName="cuil" />
              @if (form.get('cuil')?.invalid && form.get('cuil')?.touched) {
                <p class="text-danger">CUIL inválido (solo dígitos y guiones).</p>
              }
            </div>
            <div class="col-12">
              @if (
                form.errors && form.errors['cuitCuilRequired'] &&
                (form.get('cuit')?.touched || form.get('cuil')?.touched)
              ) {
                <p class="text-danger">Debe ingresar al menos CUIT o CUIL.</p>
              }
            </div>
          </div>

          <div class="d-flex justify-content-center mt-4">
            <button type="submit" class="btn btn-accent px-5 py-2 rounded-pill" [disabled]="form.invalid">
              {{ isEdit ? 'Guardar' : 'Registrar' }}
            </button>
          </div>
        </form>
      </div>

    </div>
  </div>
</div>
